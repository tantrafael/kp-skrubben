package kp{	import flash.display.MovieClip;	import flash.events.Event;	import kp.server.ServerConnection;	import kp.items.ItemManager;	import kp.rooms.RoomManager;	import kp.rooms.browser.RoomBrowser;	import kp.rooms.browser.RoomLayout;	import kp.rooms.browser.Room;	import kp.rooms.map.Map;	//-------------------------------------------------------------------------	// Main	//-------------------------------------------------------------------------	public class Main extends MovieClip	{		protected var serverConnection:ServerConnection = ServerConnection.Instance;		protected var itemManager:ItemManager = ItemManager.Instance;		protected var roomManager:RoomManager = RoomManager.Instance;		protected var user:String = null;	/*		protected var serverConnection:ServerConnection = null;		protected var itemManager:ItemManager = null;		protected var roomManager:RoomManager = null;	*/		protected var roomBrowser:RoomBrowser = null;		protected var map:Map = null;		//---------------------------------------------------------------------		public function Main():void		{		//	serverConnection.Initialize( root.loaderInfo.parameters.nick );		//	serverConnection.SetUser( root.loaderInfo.parameters.nick );			user = root.loaderInfo.parameters.nick;			roomBrowser = CreateRoomBrowser();			roomBrowser.addEventListener( RoomLayout.ENTER_ROOM, HandleRoomBrowserEvent );			map = CreateMap();		}		//---------------------------------------------------------------------		protected function CreateRoomBrowser():RoomBrowser		{			return new RoomBrowser();		}		//---------------------------------------------------------------------		protected function CreateMap():Map		{			return new Map();		}		//---------------------------------------------------------------------		protected function HandleRoomBrowserEvent( event:Event ):void		{		/*			var roomId:int = roomBrowser.GetCurrentRoom().Id;			map.Display( roomId );		*/			var currentRoom:Room = roomBrowser.GetCurrentRoom();			map.Display( currentRoom );		}		//---------------------------------------------------------------------		protected function Destroy( event:Event = null ):void 		{}	}}